<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar Partidos</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

    
    <style>
        :root {
            --primary-bg: #f5f5f5;
            --card-bg: #ffffff;
            --highlight-color: #007bff;
            --text-color: #333333;
            --muted-text: #777777;
            --border-color: #dddddd;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        body {
            background-color: var(--primary-bg);
            color: var(--text-color);
            font-family: 'Roboto', sans-serif;
            margin: 0;
        }

        .container {
            margin-top: 100px;
            padding-bottom: 50px;
        }

        h1 {
            color: var(--highlight-color);
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
        }

        p {
            color: var(--muted-text);
            text-align: center;
        }

        .match-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px var(--shadow-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .match-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px var(--shadow-color);
        }

        .team-logo {
            max-width: 70px;
            border-radius: 50%;
            margin-bottom: 10px;
            border: 2px solid var(--highlight-color);
        }

        .team-name {
            font-size: 1.1rem;
            font-weight: bold;
            margin-top: 5px;
        }

        .vs-circle {
            background-color: var(--highlight-color);
            color: var(--card-bg);
            font-size: 1.5rem;
            font-weight: bold;
            padding: 10px 20px;
            border-radius: 5px;
        }

        .match-info {
            color: var(--muted-text);
            font-size: 0.9rem;
        }

        .highlight {
            color: var(--highlight-color);
            font-weight: bold;
        }

        .no-results {
            font-size: 1.2rem;
            color: var(--muted-text);
        }

        .match-date {
            font-size: 1rem;
            color: var(--text-color);
            font-weight: bold;
            margin-top: 10px;
        }

        footer {
            background: var(--card-bg);
            text-align: center;
            padding: 15px;
            margin-top: 50px;
            border-top: 1px solid var(--border-color);
        }

        footer p {
            color: var(--muted-text);
            margin: 0;
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav container-nav">
           <div class="nav__data">
              <a href="{% url 'proximo_partido' %}" class="nav__logo">
                 <i class="ri-planet-line"></i> StatSportiva
              </a>
              
              <div class="nav__toggle" id="nav-toggle">
                 <i class="ri-menu-line nav__burger"></i>
                 <i class="ri-close-line nav__close"></i>
              </div>
           </div>

           <!--=============== NAV MENU ===============-->
           <div class="nav__menu" id="nav-menu">
              <ul class="nav__list">
                 <li><a href="{% url 'proximo_partido' %}" class="nav__link">Inicio</a></li>

                 <li><a href="#" class="nav__link">Foro</a></li>

                 <!--=============== DROPDOWN 1 ===============-->
                 <li class="dropdown__item">
                    <div class="nav__link">
                       Analytics <i class="ri-arrow-down-s-line dropdown__arrow"></i>
                    </div>

                    <ul class="dropdown__menu">
                       <li>
                          <a href="{% url 'tabla_posiciones' %}" class="dropdown__link">
                             <i class="ri-pie-chart-line"></i> Posiciones
                          </a>                          
                       </li>

                       <li>
                          <a href="{% url 'bracket_eliminatorias' campeonato_id=1 %}" class="dropdown__link">
                             <i class="ri-arrow-up-down-line"></i> Eliminatorias
                          </a>
                       </li>

                       <!--=============== DROPDOWN SUBMENU ===============-->
                       <li class="dropdown__subitem">
                          <div class="dropdown__link">
                             <i class="ri-bar-chart-line"></i> Partidos <i class="ri-add-line dropdown__add"></i>
                          </div>

                          <ul class="dropdown__submenu">
                             <li>
                                <a href="{% url 'estadisticas_equipos' %}" class="dropdown__sublink">
                                   <i class="ri-file-list-line"></i> Estadisticas
                                </a>
                             </li>
     
                             <li>
                                <a href="#" class="dropdown__sublink">
                                   <i class="ri-cash-line"></i> Payments
                                </a>
                             </li>
     
                             <li>
                                <a href="#" class="dropdown__sublink">
                                   <i class="ri-refund-2-line"></i> Refunds
                                </a>
                             </li>
                          </ul>
                       </li>
                    </ul>
                 </li>
                 

                 <li class="nav__item form-inline my-2 my-lg-0">
                    <form method="GET" action="{% url 'buscar_partidos' %}" class="form-inline">
                        <input class="form-control mr-sm-2 nav__search-input" type="search" name="q" placeholder="Buscar partidos..." aria-label="Buscar" value="{{ query|default:'' }}">
                        <button class="btn btn-outline-warning nav__search-button" type="submit">Buscar</button>
                    </form>
                </li>
                 <!--=============== DROPDOWN 2 ===============-->
                 <li class="dropdown__item">
                    <div class="nav__link">
                       Usuario <i class="ri-arrow-down-s-line dropdown__arrow"></i>
                    </div>

                    <ul class="dropdown__menu">
                        {% if user.is_authenticated %}
                        <li>
                          <a href="{% url 'perfil_usuario' %}" class="dropdown__link">
                             <i class="ri-user-line"></i> Perfil
                          </a>                          
                       </li>
                       {% endif %}
                       <li>
                        {% if user.is_authenticated %}
                        {% if not equipo_inscrito %}
                            <a href="{% url 'inscribir_equipo' %}" class="dropdown__link"><i class="ri-lock-line"></i>Inscribir equipo</a>
                        {% endif %}
                            <form method="POST" action="{% url 'logout' %}"  class="dropdown__link">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-outline-warning nav__search-button">Cerrar Sesión</button>
                        </form>
                    {% else %}
                        <a href="{% url 'login' %}" class="dropdown__link"><i class="ri-lock-line"></i> Iniciar sesion</a>
                    {% endif %}


                       </li>

                    </ul>
                 </li>

                 <li><a href="#" class="nav__link">Contacto</a></li>
              </ul>
           </div>
        </nav>
     </header>

    <div class="container">
        <div class="text-center my-5">
            <h1>Buscar Partidos</h1>
            <p>Consulta los detalles de los próximos partidos y resultados.</p>
        </div>
        {% if partidos %}
            <div class="row">
                {% for partido in partidos %}
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <div class="match-card">
                            <div class="text-center">
                                <p class="match-date">{{ partido.fecha|date:"D, d M Y" }} | {{ partido.fecha|time:"H:i" }}</p>
                            </div>
                            <div class="d-flex justify-content-around align-items-center text-center">
                                <div>
                                    <img src="{% if partido.equipo_local.logo %}{{ partido.equipo_local.logo.url }}{% else %}{% static 'img/default_team.png' %}{% endif %}" 
                                         alt="{{ partido.equipo_local.nombre_equipo }}" 
                                         class="team-logo">
                                    <div class="team-name">{{ partido.equipo_local.nombre_equipo }}</div>
                                </div>
                                <div>
                                    <div class="vs-circle">VS</div>
                                </div>
                                <div>
                                    <img src="{% if partido.equipo_visitante.logo %}{{ partido.equipo_visitante.logo.url }}{% else %}{% static 'img/default_team.png' %}{% endif %}" 
                                         alt="{{ partido.equipo_visitante.nombre_equipo }}" 
                                         class="team-logo">
                                    <div class="team-name">{{ partido.equipo_visitante.nombre_equipo }}</div>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <p class="match-info">Estadio: <span class="highlight">{{ partido.estadio.nombre }}</span> | Fase: <span class="highlight">{{ partido.fase }}</span></p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-center no-results">No se encontraron partidos para el término <strong>"{{ query }}"</strong>.</p>
        {% endif %}
    </div>

    {% include 'partials/footer.html' %}

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
